function update_map(e,t,a){e.fitBounds(a.viewport),e.setZoom(12),t.setPosition(a.location),document.dispatchEvent(new Event("setCircle"))}function update_ui(e,t){t.autocomplete("close"),t.val(e)}function geocode_lookup(e,t,a,o,i,n,r){a=void 0!==a&&a,request={},request[e]=t,i.geocode(request,function(i,s){s==google.maps.GeocoderStatus.OK?i[0]?(update_ui(i[0].formatted_address,o),a&&update_map(n,r,i[0].geometry)):console.log("Sorry, something went wrong. Try again!"):"address"==e?console.log("Sorry! We couldn't find "+t+". Try a different search term, or click the map."):(console.log("Woah... that's pretty remote!                                 You're going to have to manually enter a place name."),update_ui("",o))})}!function(e,t,a){"use strict";var o,i=new a({el:"#radius_slider",data:{radius:5}}),n=new a({el:"#employees",data:{employees:[]}}),r=[{_id:"5945de41f458ef07fa89b69d",isActive:!1,picture:"https://api.adorable.io/avatars/40/6835@adorable.io.png",name:"Edwards Roy",phone:"+1 (842) 557-2223",address:"654 Monroe Place, Ypsilanti, Marshall Islands, 6835",latitude:45.489729,longitude:9.2240223},{_id:"5945de411600a4619c7890a0",isActive:!0,picture:"https://api.adorable.io/avatars/40/3996@adorable.io.png",name:"Trujillo Adams",phone:"+1 (805) 499-2044",address:"999 Chester Avenue, Worcester, Connecticut, 3996",latitude:45.472397,longitude:9.1248023},{_id:"5945de414c45e6435ffd9122",isActive:!0,picture:"https://api.adorable.io/avatars/40/6958@adorable.io.png",name:"Lancaster Fry",phone:"+1 (949) 517-2584",address:"388 Covert Street, Vallonia, Colorado, 6958",latitude:45.51085,longitude:9.1617473},{_id:"5945de410d53948e0fe8445a",isActive:!1,picture:"https://api.adorable.io/avatars/40/3176@adorable.io.png",name:"Walls Roman",phone:"+1 (912) 598-2729",address:"939 Church Avenue, Jeff, Hawaii, 3176",latitude:45.413391,longitude:9.1876743},{_id:"5945de4121667238d106ba73",isActive:!1,picture:"https://api.adorable.io/avatars/40/2480@adorable.io.png",name:"Annmarie Mcleod",phone:"+1 (835) 446-2295",address:"631 Stuart Street, Muir, Utah, 2480",latitude:45.456961,longitude:9.1971363},{_id:"5945de4140e5c6a2e0d30aa9",isActive:!0,picture:"https://api.adorable.io/avatars/40/322@adorable.io.png",name:"Valdez Huffman",phone:"+1 (849) 549-3214",address:"643 Dewey Place, Coloma, Nebraska, 322",latitude:45.466385,longitude:9.1725273}],s=e("#address"),l=new t({el:"#overlayermap",zoom:12,lat:45.4627124,lng:9.1227984}),d=new google.maps.Marker({draggable:!0}),c=new google.maps.Geocoder;l.addMarker(d),google.maps.event.addListener(d,"dragend",function(){geocode_lookup("latLng",d.getPosition(),!1,s,c,l,d),document.dispatchEvent(new Event("setCircle"))}),google.maps.event.addListener(l,"click",function(e){d.setPosition(e.latLng),geocode_lookup("latLng",e.latLng,!1,s,c,l,d),document.dispatchEvent(new Event("setCircle"))}),document.addEventListener("setCircle",function(e){o&&o.setVisible(!1),(o=l.drawCircle({lat:d.getPosition().lat(),lng:d.getPosition().lng(),strokeColor:"#738999",strokeOpacity:1,strokeWeight:3,fillColor:"#abc6d7",clickable:!1})).setRadius(1e3*i.radius),n.employees=r.filter(function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);if(o.contains(t)){console.log(o.getCenter());var a=google.maps.geometry.spherical.computeDistanceBetween(o.getCenter(),t);return e._distance=Math.floor(a/1e3),!0}return!1}).sort(function(e,t){return e._distance-t._distance})}),s.autocomplete({source:function(t,a){c.geocode({address:t.term},function(t,o){a(e.map(t,function(e){return{label:e.formatted_address,value:e.formatted_address,geocode:e}}))})},select:function(e,t){update_ui(t.item.value,s),update_map(l,d,t.item.geocode.geometry)}}),s.bind("keydown",function(e){13==e.keyCode?(geocode_lookup("address",s.val(),!0,s,c,l,d),s.autocomplete("disable")):s.autocomplete("enable")}),e.each(r,function(e,t){var a='<div class="gmaps-overlay '+(t.isActive?"success":"danger")+'"><img style="width: 32px" src="'+t.picture+'" alt="user" class="img-circle"><div class="gmaps-overlay_arrow above"></div></div>';l.drawOverlay({lat:t.latitude,lng:t.longitude,layer:"overlayLayer",content:a,verticalAlign:"top",horizontalAlign:"center"})}),e("#area").slider({animate:!0,value:1,min:5,max:500,slide:function(e,t){i.radius=t.value,o&&(o.setRadius(1e3*t.value),n.employees=r.filter(function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);if(o.contains(t)){var a=google.maps.geometry.spherical.computeDistanceBetween(o.getCenter(),t);return e._distance=Math.floor(a/1e3),!0}return!1}).sort(function(e,t){return e._distance-t._distance}))}}),e("#employee_table").slimScroll({height:"250px"})}(jQuery,GMaps,Vue),google.maps.Circle.prototype.contains=function(e){return this.getBounds().contains(e)&&google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),e)<=this.getRadius()};